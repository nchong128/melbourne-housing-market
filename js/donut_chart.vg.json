{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "A simple donut chart with embedded data.",
  "data": {"url": "data/sellingMethodDist.csv"},
  "hconcat": [
    {
      "layer": [
        {
          "width": "container",
          "height": 300,
          "params": [
            {
              "name": "method_select",
              "select": {"type": "point", "fields": ["Name"]},
              "bind": "legend"
            }
          ],
          "mark": {
            "type": "arc",
            "innerRadius": 90,
            "stroke": "black",
            "cursor": "pointer"
          },
          "encoding": {
            "theta": {"field": "Count", "type": "quantitative"},
            "color": {
              "field": "Name",
              "type": "nominal",
              "title": "Selling Methods",
              "legend": {
                "orient": "bottom",
                "direction": "vertical"
              }
            },
            "strokeWidth": {
              "condition": [{"param": "method_select", "empty": false, "value": 2}]
            },
            "opacity": {
              "condition": [{"param": "method_select", "value": 1}],
              "value": 0.3
            },
            "tooltip": [
              {"field": "Name", "type": "nominal", "title": "Method type"},
              {"field": "Count", "type": "quantitative", "format": ","},
              {"field": "Description", "type": "ordinal"},
              {
                "field": "ratio_of_total",
                "type": "quantitative",
                "format": ".1%",
                "title": "% of total"
              }
            ]
          }
        },
        {
          "mark": {
            "type": "text",
            "align": "center", 
            "baseline": "middle",
            "fontSize": 15
          },
          "encoding": {
            "text": {
              "value": "Selling Methods"
            }
          }
        }
      ]
    }
  ]
}